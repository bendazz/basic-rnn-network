body {
  font-family: system-ui, Arial, sans-serif;
  margin: 0;
  background:#0f1115;
  color:#e6e9ed;
  display:flex;
  flex-direction:column;
  min-height:100vh;
}
header, footer { padding: 1rem 1.5rem; }
header h1 { margin:0 0 .25rem; font-size:1.4rem; }
.main { }
.panels-row { display:flex; gap:2rem; align-items:center; }
.left-stack { display:flex; flex-direction:column; gap:1.2rem; }
main { flex:1; display:flex; flex-direction:column; align-items:flex-start; gap:1.6rem; padding:0 1.5rem 1.5rem; }
.network-box { width:640px; aspect-ratio:16/9; background:#1b1f24; border:1px solid #2a313b; border-radius:8px; position:relative; }
.panel { width:640px; display:flex; flex-direction:column; gap:.4rem; position:relative; }
.target-panel { width:640px; }
.panel h2 { display:none; }
.matrix-label { font-size:1rem; font-weight:600; letter-spacing:.5px; }
.panel .matrix-label { position:absolute; top:14px; left:50%; transform:translateX(-50%); margin:0; padding:2px 10px 3px; text-align:center; background:rgba(15,17,21,0.55); backdrop-filter:blur(2px); border-radius:4px; z-index:3; pointer-events:none; }
.matrix-label .sub { font-size:.8em; vertical-align:sub; }
.matrix-label .shape { font-weight:400; font-size:.85rem; color:#94a3b8; margin-left:.35rem; }
.global-controls { display:flex; gap:2rem; flex-wrap:wrap; justify-content:flex-start; width:100%; }
.size-control { display:flex; align-items:center; gap:1rem; margin-top:.5rem; margin-bottom:.5rem; }
.size-control label { font-size:.9rem; }
input[type=range] { width:200px; }
button { background:#2563eb; color:#fff; border:none; padding:.6rem 1rem; border-radius:6px; cursor:pointer; font-size:.9rem; }
button:hover { background:#1d4ed8; }
svg { width:100%; height:100%; }
.node { fill:#12161c; stroke:#f59e0b; stroke-width:2; }
.node.secondary { stroke:#10b981; }
.edge { stroke:#64748b; stroke-width:2; marker-end:url(#arrowHead); opacity:.55; transition:stroke 0.3s, opacity 0.3s; }
.edge.active { stroke:#38bdf8; opacity:1; }
.label { font-size:12px; fill:#e6e9ed; pointer-events:none; }
footer { opacity:.6; text-align:center; }
/* Animation prep */
.animation-controls { display:flex; gap:.75rem; margin-top:.25rem; }
.animation-controls button { background:#6366f1; color:#fff; border:none; padding:.55rem .9rem; border-radius:6px; cursor:pointer; font-size:.85rem; }
.animation-controls button:hover { background:#4f46e5; }
.overlay-layer { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; }
.clone-node { stroke-width:2; }
.bias-node { display:none !important; }
.result-node { stroke:#9333ea; fill:#1e1b4b; stroke-width:2; opacity:0; }
.result-node.visible { opacity:1; transition: opacity .6s ease .2s; }
.op-label { fill:#e6e9ed; font-size:28px; font-weight:600; opacity:0; }
.op-label.visible { opacity:1; transition: opacity .4s ease; }
.vector-label { fill:#94a3b8; font-size:14px; font-weight:500; letter-spacing:.5px; opacity:0; }
.vector-label.visible { opacity:1; transition: opacity .4s ease .1s; }

/* Section divider and next section styling */
.section-divider { border: 0; border-top: 1px solid #2a313b; margin: 1.5rem 1.5rem 0; }
.content-section { padding: 1rem 1.5rem 2rem; }
.content-section h2 { margin: .5rem 0 0; font-size: 1.2rem; }
.square-node { stroke:#9333ea; fill:#1e1b4b; stroke-width:2; }
.rnn-label { fill:#e6e9ed; font-size:16px; font-weight:600; }

/* RNN animation styles */
@keyframes rnn-flash-red {
  0% { fill:#1e1b4b; }
  30% { fill:#ef4444; }
  100% { fill:#1e1b4b; }
}
.square-node.flash { animation: rnn-flash-red 700ms ease-in-out; }
.rnn-arrow { stroke:#38bdf8; stroke-width:2; opacity:.9; }
.rnn-output-circle { fill:#12161c; stroke:#f59e0b; stroke-width:2; }
.rnn-output-label { fill:#e6e9ed; font-size:12px; font-weight:600; text-anchor:middle; dominant-baseline:middle; }
.forget-output-circle { fill:#1e1b4b; stroke:#9333ea; stroke-width:2; opacity:0; }
.forget-output-circle.visible { opacity:1; transition: opacity .5s ease; }
.forget-output-circle.forget-flash { animation: forget-flash-yellow 700ms ease-in-out; }
.forget-c-triangle { fill:none; stroke:#ec4899; stroke-width:2.5; opacity:0; }
.forget-c-triangle.visible { opacity:1; transition: opacity .6s ease .2s; }
.forget-op { fill:#e6e9ed; font-size:32px; font-weight:600; opacity:0; }
.forget-op.visible { opacity:1; transition: opacity .4s ease; }
@keyframes forget-flash-yellow {
  0% { fill:#1e1b4b; }
  30% { fill:#eab308; }
  100% { fill:#1e1b4b; }
}
.square-node.forget-flash { animation: forget-flash-yellow 700ms ease-in-out; }
/* Input Gate animation (reuse yellow flash) */
.square-node.input-flash { animation: forget-flash-yellow 700ms ease-in-out; }
.input-output-circle { fill:#1e1b4b; stroke:#9333ea; stroke-width:2; opacity:0; }
.input-output-circle.visible { opacity:1; transition: opacity .5s ease; }
.input-output-circle.input-flash { animation: forget-flash-yellow 700ms ease-in-out; }
.input-output-circle.input-tanh-flash { animation: rnn-flash-red 700ms ease-in-out; }
/* Combined panel operators */
.combined-op { fill:#e6e9ed; font-size:28px; font-weight:600; opacity:0; }
.combined-op.visible { opacity:1; transition: opacity .4s ease; }
.triangle-label { fill:#ec4899; font-size:12px; font-weight:600; text-anchor:middle; dominant-baseline:middle; opacity:0; }
.triangle-label.visible { opacity:1; transition: opacity .4s ease .15s; }
/* Output Gate triangle tanh flash */
@keyframes output-triangle-flash-red {
  0% { fill:none; }
  30% { fill:#ef4444; }
  100% { fill:none; }
}
.forget-c-triangle.output-tanh-flash { animation: output-triangle-flash-red 700ms ease-in-out; }
.output-gate-circle { fill:#1e1b4b; stroke:#9333ea; stroke-width:2; opacity:0; }
.output-gate-circle.visible { opacity:1; transition: opacity .5s ease; }
/* Flash variant for output gate second-panel circles */
.output-gate-circle.output-flash { animation: forget-flash-yellow 700ms ease-in-out; }
/* Input Gate second panel tanh flash (red) */
.square-node.input-tanh-flash { animation: rnn-flash-red 700ms ease-in-out; }

/* Inline matrix label appearing inside SVG */
.inline-matrix-label { fill:#e6e9ed; font-size:16px; font-weight:600; opacity:0; }
.inline-matrix-label.visible { opacity:1; transition: opacity .4s ease; }
.inline-matrix-label tspan.subscript { font-size:0.65em; baseline-shift:sub; }

/* LSTM composite diagram static styles */
.lstm-gate-circle { fill:#12161c; stroke:#9333ea; stroke-width:2; }
.lstm-input-circle { fill:#12161c; stroke:#10b981; stroke-width:2; }
.lstm-hidden-circle { fill:#12161c; stroke:#f59e0b; stroke-width:2; }
.lstm-cell-triangle { fill:none; stroke:#ec4899; stroke-width:2.5; }
.lstm-op { fill:#e6e9ed; font-size:14px; font-weight:600; text-anchor:middle; dominant-baseline:middle; }
.lstm-op-large { fill:#e6e9ed; font-size:22px; font-weight:600; text-anchor:middle; dominant-baseline:middle; }
/* Unified smaller operator style for circle operators */
.lstm-op-circle { fill:#e6e9ed; font-size:18px; font-weight:600; text-anchor:middle; dominant-baseline:middle; }
.lstm-label { fill:#e6e9ed; font-size:12px; font-weight:600; text-anchor:middle; dominant-baseline:middle; }
.lstm-weight-label { fill:#e6e9ed; font-size:14px; font-weight:600; }
.lstm-connector { stroke:#475569; stroke-width:2; opacity:.65; }
.lstm-connector.emph { stroke:#9333ea; opacity:.9; }
.lstm-path-line { stroke:#9333ea; stroke-width:3; fill:none; }
/* Activation (sigma) overlay rectangles on vertical arrows */
.lstm-activation-rect { fill:#1e1b4b; stroke:#eab308; stroke-width:2; }
.lstm-activation-symbol { fill:#e6e9ed; font-size:16px; font-weight:600; text-anchor:middle; dominant-baseline:middle; }
/* Tanh activation rectangle (third arrow) */
.lstm-activation-rect-tanh { fill:#1e1b4b; stroke:#ef4444; stroke-width:2; }
.lstm-activation-symbol-tanh { fill:#e6e9ed; font-size:14px; font-weight:600; text-anchor:middle; dominant-baseline:middle; letter-spacing:.5px; }
/* Flow animation dots */
.anim-flow-dot { stroke-width:2; opacity:0.95; }
.anim-dot-red { fill:#ef4444; stroke:#ef4444; }
.anim-dot-orange { fill:#f59e0b; stroke:#f59e0b; }
.anim-dot-green { fill:#10b981; stroke:#10b981; }
.anim-dot-purple { fill:#9333ea; stroke:#9333ea; }
.anim-dot-blue { fill:#3b82f6; stroke:#3b82f6; }

/* Practice section styles */
#practice-section .practice-intro { max-width:900px; font-size:.9rem; line-height:1.45; color:#cbd5e1; }
.practice-problems { display:grid; gap:1.2rem; margin-top:1rem; grid-template-columns:repeat(auto-fill,minmax(320px,1fr)); }
.practice-problem { background:#1b1f24; border:1px solid #2a313b; border-radius:10px; padding:0.85rem 0.9rem 1rem; position:relative; display:flex; flex-direction:column; }
.practice-problem h3 { margin:0 0 .6rem; font-size:1rem; font-weight:600; letter-spacing:.5px; }
.practice-problem pre { margin:0; background:#0f1115; border:1px solid #334155; padding:.6rem .7rem; border-radius:6px; overflow-x:auto; font-size:.75rem; line-height:1.25; }
.practice-problem code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; white-space:pre; display:block; }
.practice-copy-btn { align-self:flex-start; margin:-.2rem 0 .5rem; background:#2563eb; font-size:.7rem; padding:.4rem .65rem; }
.practice-copy-btn:hover { background:#1d4ed8; }
.practice-copy-btn.copied { background:#10b981; }
/* Answer checking UI */
.practice-answer { margin-top:.65rem; display:flex; flex-direction:column; gap:.45rem; }
.practice-show-btn { align-self:flex-start; background:#9333ea; font-size:.7rem; padding:.4rem .65rem; }
.practice-show-btn:hover { background:#7e22ce; }
.practice-solution { background:#0f1115; border:1px solid #334155; border-radius:6px; padding:.5rem .6rem; font-size:.7rem; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; line-height:1.25; white-space:pre-wrap; }
